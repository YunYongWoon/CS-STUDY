# Chapter 4. 스레드와 병행성

## 스레드?

- CPU 이용의 기본 단위
- 스레드 ID, PC, 레지스터 집합, 스택은 각 스레드에 구성되어 사용
- 프로세스에 속하는 코드, 데이터 섹션 등의 자원을 공유함

### 장점

- 응답성
    - 긴 작업을 수행하더라도, 다른 스레드는 작업을 수행할 수 있다.
- 자원공유
    - 스레드는 속한 프로세스의 자원과 메모리를 공유한다. (커널의 개입을 피할 수 있음)
- 경제성
    - 프로세스 생성, 문맥 교환에 비해 효율적이다.
- 규모 적응성(멀티 프로세서 활용)
    - 병렬 처리를 통해 성능이 향상된다.

### 사용자 수준 스레드

- 사용자 영역의 스레드 라이브러리로 구현되는 스레드
- 커널은 스레드의 존재를 모름
    - 커널의 개입이 이뤄지지 않음

### 커널 수준 스레드

- 커널에 의해 직접 관리
- 커널 영역에서 스레드의 생성, 관리 수행
    - 문맥 교환 등 부하가 큼

## 다중 스레드 모델

- 프로그램 언어에서 스레드 생성 방식은 OS의 구현 방식을 따라간다.

### 다대일 모델

- N개의 사용자 수준 스레드가 하나의 커널 수준 스레드와 매핑되는 형태
- 다중 코어 시스템의 병렬성을 살리지 못함
    - 한번에 하나의 스레드만 커널에 접근 가능
    - 한 스레드가 동기식 시스템 콜을 수행할 경우 스레드 전체가 봉쇄

### 일대일 모델

- 하나의 사용자 수준 스레드가 하나의 커널 수준 스레드와 매핑되는 형태
- 병렬성 증가
- 사용자 수준 스레드 생성 시 커널 수준 스레드 생성 필요 ⇒ 오버헤드 증가
- 대부분의 운영체제 채택

### 다대다 모델

- M개의 사용자 수준 스레드와 N개의 커널 수준 스레드가 매핑되는 형태
- 병렬성이 제한적으로 이뤄짐
- 구현이 어려움
